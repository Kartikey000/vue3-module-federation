"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.noticeError = noticeError;
exports.setupNoticeErrorAPI = setupNoticeErrorAPI;
var _handle = require("../../common/event-emitter/handle");
var _now = require("../../common/timing/now");
var _features = require("../features/features");
var _constants = require("./constants");
var _sharedHandlers = require("./sharedHandlers");
/**
 * Copyright 2020-2025 New Relic, Inc. All rights reserved.
 * SPDX-License-Identifier: Apache-2.0
 */

function setupNoticeErrorAPI(agent) {
  (0, _sharedHandlers.setupAPI)(_constants.NOTICE_ERROR, (err, customAttributes) => noticeError(err, customAttributes, agent), agent);
}
function noticeError(err, customAttributes, agentRef, targetEntityGuid, timestamp = (0, _now.now)()) {
  if (typeof err === 'string') err = new Error(err);
  (0, _handle.handle)('err', [err, timestamp, false, customAttributes, agentRef.runtime.isRecording, undefined, targetEntityGuid], undefined, _features.FEATURE_NAMES.jserrors, agentRef.ee);
  (0, _handle.handle)('uaErr', [], undefined, _features.FEATURE_NAMES.genericEvents, agentRef.ee);
}