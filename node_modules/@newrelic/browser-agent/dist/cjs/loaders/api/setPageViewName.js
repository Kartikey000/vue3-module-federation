"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.setupSetPageViewNameAPI = setupSetPageViewNameAPI;
var _handle = require("../../common/event-emitter/handle");
var _now = require("../../common/timing/now");
var _constants = require("./constants");
var _sharedHandlers = require("./sharedHandlers");
/**
 * Copyright 2020-2025 New Relic, Inc. All rights reserved.
 * SPDX-License-Identifier: Apache-2.0
 */

function setupSetPageViewNameAPI(agent) {
  (0, _sharedHandlers.setupAPI)(_constants.SET_PAGE_VIEW_NAME, function (name, host) {
    if (typeof name !== 'string') return;
    if (name.charAt(0) !== '/') name = '/' + name;
    agent.runtime.customTransaction = (host || 'http://custom.transaction') + name;
    (0, _handle.handle)(_constants.prefix + _constants.SET_PAGE_VIEW_NAME, [(0, _now.now)()], undefined, undefined, agent.ee);
  }, agent);
}