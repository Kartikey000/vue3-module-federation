"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.setupSetUserIdAPI = setupSetUserIdAPI;
var _console = require("../../common/util/console");
var _constants = require("./constants");
var _sharedHandlers = require("./sharedHandlers");
/**
 * Copyright 2020-2025 New Relic, Inc. All rights reserved.
 * SPDX-License-Identifier: Apache-2.0
 */

function setupSetUserIdAPI(agent) {
  /**
    * Attach the 'enduser.id' attribute onto agent payloads. This may be used in NR queries to group all browser events by specific users.
    * @param {string} value - unique user identifier; a null user id suggests none should exist
    * @returns @see apiCall
    */
  (0, _sharedHandlers.setupAPI)(_constants.SET_USER_ID, function (value) {
    if (!(typeof value === 'string' || value === null)) {
      (0, _console.warn)(41, typeof value);
      return;
    }
    return (0, _sharedHandlers.appendJsAttribute)(agent, 'enduser.id', value, _constants.SET_USER_ID, true);
  }, agent);
}